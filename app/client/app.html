<head>
    <title>Secret Space Santa</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <div class="sss-heading">
        <h1>Secret Space Santa</h1>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <p class="bg-danger">
                    This application was built to manage the upcoming Secret Santa event for the Young ESRIN community.<br>
                    It uses cutting-edge technology to handle the <em>vast amount of data</em>, eg.
                    <a href="https://www.meteor.com/">Meteor</a> and
                    <a href="https://www.mongodb.com/">mongoDB</a>.<br>
                    If you want to contribute to this project, check out <a href="https://github.com/jletellier/secret-space-santa">this GitHub repository</a>.
                </p>

                {{> admin }}
            </div>
            <div class="col-md-4">
                {{> statistics }}
                <div class="bg-warning sss-login">
                    {{> loginButtons }}
                </div>
            </div>
        </div>

        <div class="row">

        </div>
    </div>

</body>

<template name="statistics">
    <div class="bg-danger">
        <p>Event coming up <span class="text-danger">{{ remaining }}</span></p>
        <p>Participants: <span class="text-danger">{{ participantCount }}</span></p>
        <p>Participants drawn: <span class="text-danger">{{ drawnCount }}</span></p>
    </div>
</template>

<template name="admin">
    <div class="sss-admin bg-warning">
        {{# if currentUser }}
            {{# if hasAdminPermission }}
                <div class="clearfix">
                    <div class="pull-left"><h2>Santa Claus' Area</h2></div>
                    <div class="pull-right">
                        <button type="button" class="add-item btn btn-success">
                            <span class="remove-item glyphicon glyphicon-plus-sign"></span>
                            Add participant
                        </button>
                    </div>
                </div>
                {{> adminList }}
            {{ else }}
                <p>You are not Santa Claus. Get out of here!</p>
            {{/ if }}
        {{/ if }}
    </div>
</template>

<template name="adminList">
    <table>
        <thead><tr>
            <th>Participant</th>
            <th>Drawn participant</th>
            <th></th>
        </tr></thead>
        <tbody>
            {{# each participants }}
                {{> adminListItem }}
            {{/ each }}
        </tbody>
    </table>
</template>

<template name="adminListItem">
    <tr class="{{# if drawn }}bg-success{{/ if }}">
        <td>{{ name }}</td>
        <td>
            <select class="form-control">
                <option>{{ drawnParticipant }}</option>
                {{# each freeParticipants }}
                    <option>{{ name }}</option>
                {{/ each }}
            </select>
        </td>
        <td>
            <span class="remove-item glyphicon glyphicon-minus-sign"></span>
        </td>
    </tr>
</template>